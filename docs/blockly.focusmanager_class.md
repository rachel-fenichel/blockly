Project: /blockly/_project.yaml
Book: /blockly/_book.yaml

<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[blockly](./blockly.md) &gt; [FocusManager](./blockly.focusmanager_class.md)

## FocusManager class

A per-page singleton that manages Blockly focus across one or more IFocusableTrees, and bidirectionally synchronizes this focus with the DOM.

Callers that wish to explicitly change input focus for select Blockly components on the page should use the focus functions in this manager.

The manager is responsible for handling focus events from the DOM (which may may arise from users clicking on page elements) and ensuring that corresponding IFocusableNodes are clearly marked as actively/passively highlighted in the same way that this would be represented with calls to focusNode().

**Signature:**

```typescript
export declare class FocusManager 
```

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(addGlobalEventListener)](./blockly.focusmanager_class._constructor__1_constructor.md)


</td><td>


</td><td>

Constructs a new instance of the `FocusManager` class


</td></tr>
</tbody></table>

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[ACTIVE\_FOCUS\_NODE\_CSS\_CLASS\_NAME](./blockly.focusmanager_class.active_focus_node_css_class_name_property.md)


</td><td>

`static`

`readonly`


</td><td>

(not declared)


</td><td>

The CSS class assigned to IFocusableNode elements that presently have active DOM and Blockly focus.

This should never be used directly. Instead, rely on FocusManager to ensure nodes have active focus (either automatically through DOM focus or manually through the various focus\* methods provided by this class).

It's recommended to not query using this class name, either. Instead, use FocusableTreeTraverser or IFocusableTree's methods to find a specific node.


</td></tr>
<tr><td>

[PASSIVE\_FOCUS\_NODE\_CSS\_CLASS\_NAME](./blockly.focusmanager_class.passive_focus_node_css_class_name_property.md)


</td><td>

`static`

`readonly`


</td><td>

(not declared)


</td><td>

The CSS class assigned to IFocusableNode elements that presently have passive focus (that is, they were the most recent node in their relative tree to have active focus--see ACTIVE\_FOCUS\_NODE\_CSS\_CLASS\_NAME--and will receive active focus again if their surrounding tree is requested to become focused, i.e. using focusTree below).

See ACTIVE\_FOCUS\_NODE\_CSS\_CLASS\_NAME for caveats and limitations around using this constant directly (generally it never should need to be used).


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[focusNode(focusableNode)](./blockly.focusmanager_class.focusnode_1_method.md)


</td><td>


</td><td>

Focuses DOM input on the specified node, and marks it as actively focused.

Any previously focused node will be updated to be passively highlighted (if it's in a different focusable tree) or blurred (if it's in the same one).

\*\*Important\*\*: If the provided node is not able to be focused (e.g. its canBeFocused() method returns false), it will be ignored and any existing focus state will remain unchanged.


</td></tr>
<tr><td>

[focusTree(focusableTree)](./blockly.focusmanager_class.focustree_1_method.md)


</td><td>


</td><td>

Focuses the specific IFocusableTree. This either means restoring active focus to the tree's passively focused node, or focusing the tree's root node.

Note that if the specified tree already has a focused node then this will not change any existing focus (unless that node has passive focus, then it will be restored to active focus).

See getFocusedNode for details on how other nodes are affected.


</td></tr>
<tr><td>

[getFocusedNode()](./blockly.focusmanager_class.getfocusednode_1_method.md)


</td><td>


</td><td>

Returns the current IFocusableNode with focus (which is always tied to a focused IFocusableTree), or null if there isn't one.

Note that this function will maintain parity with IFocusableTree.getFocusedNode(). That is, if a tree itself has focus but none of its non-root children do, this will return null but getFocusedTree() will not.

Note also that if ephemeral focus is currently captured (e.g. using takeEphemeralFocus) then the returned node here may not currently have DOM focus.


</td></tr>
<tr><td>

[getFocusedTree()](./blockly.focusmanager_class.getfocusedtree_1_method.md)


</td><td>


</td><td>

Returns the current IFocusableTree that has focus, or null if none currently do.

Note also that if ephemeral focus is currently captured (e.g. using takeEphemeralFocus) then the returned tree here may not currently have DOM focus.


</td></tr>
<tr><td>

[getFocusManager()](./blockly.focusmanager_class.getfocusmanager_1_method.md)


</td><td>

`static`


</td><td>

Returns the page-global FocusManager.

The returned instance is guaranteed to not change across function calls, but may change across page loads.


</td></tr>
<tr><td>

[isRegistered(tree)](./blockly.focusmanager_class.isregistered_1_method.md)


</td><td>


</td><td>

Returns whether the specified tree has already been registered in this manager using registerTree and hasn't yet been unregistered using unregisterTree.


</td></tr>
<tr><td>

[registerTree(tree)](./blockly.focusmanager_class.registertree_1_method.md)


</td><td>


</td><td>

Registers a new IFocusableTree for automatic focus management.

If the tree currently has an element with DOM focus, it will not affect the internal state in this manager until the focus changes to a new, now-monitored element/node.

This function throws if the provided tree is already currently registered in this manager. Use isRegistered to check in cases when it can't be certain whether the tree has been registered.


</td></tr>
<tr><td>

[takeEphemeralFocus(focusableElement)](./blockly.focusmanager_class.takeephemeralfocus_1_method.md)


</td><td>


</td><td>

Ephemerally captures focus for a specific element until the returned lambda is called. This is expected to be especially useful for ephemeral UI flows like dialogs.

IMPORTANT: the returned lambda \*must\* be called, otherwise automatic focus will no longer work anywhere on the page. It is highly recommended to tie the lambda call to the closure of the corresponding UI so that if input is manually changed to an element outside of the ephemeral UI, the UI should close and automatic input restored. Note that this lambda must be called exactly once and that subsequent calls will throw an error.

Note that the manager will continue to track DOM input signals even when ephemeral focus is active, but it won't actually change node state until the returned lambda is called. Additionally, only 1 ephemeral focus context can be active at any given time (attempting to activate more than one simultaneously will result in an error being thrown).


</td></tr>
<tr><td>

[unregisterTree(tree)](./blockly.focusmanager_class.unregistertree_1_method.md)


</td><td>


</td><td>

Unregisters a IFocusableTree from automatic focus management.

If the tree had a previous focused node, it will have its highlight removed. This function does NOT change DOM focus.

This function throws if the provided tree is not currently registered in this manager.


</td></tr>
</tbody></table>
